{"version":3,"sources":["index.js"],"names":["fetch_json","url","a","fetch","json","page","tv_shows","show_link","tvShow","savedState","App","basename","exact","path","component","TVShowsList","TVShowDetails","React","Component","scrollPos","props","state","shows","loading","appending","mounted","className","this","map","show","TVShow","history","show_name","name","show_img","image_thumbnail_path","key","id","permalink","setState","fetch_shows","then","concat","window","addEventListener","document","documentElement","offsetHeight","Math","round","innerHeight","scrollTop","appendShows","setTimeout","onClick","push","src","alt","title","description","img","style","margin","textAlign","dangerouslySetInnerHTML","__html","fetch_show_details","match","params","details","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.c2af65a1.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport './index.css';\n\nasync function fetch_json(url) {\n    return await (await fetch(url)).json()\n}\n\nasync function fetch_shows(page) {\n    return (await fetch_json(`https://www.episodate.com/api/most-popular?page=${page}`)).tv_shows\n}\n\nasync function fetch_show_details(show_link) {\n    return (await fetch_json(`https://www.episodate.com/api/show-details?q=${show_link}`)).tvShow;\n}\n\nclass App extends React.Component {\n    render() {\n        return (\n            <Router basename=\"/tv-shows-react\">\n                <Route exact path=\"/\" component={TVShowsList} />\n                <Route exact path=\"/show/:show_link\" component={TVShowDetails} />\n            </Router>\n        )\n    }\n}\n\nvar savedState;\nvar scrollPos = 0;\n\nclass TVShowsList extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = { shows: [], page: 1, loading: false };\n        this.appending = false;\n        this.mounted = false;\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"title\">TV Shows</div>\n                {this.state.shows.map(show => (\n                    <TVShow history={this.props.history} show_name={show.name} show_img={show.image_thumbnail_path} key={show.id} show_link={show.permalink}></TVShow>\n                ))}\n                {this.state.loading ? (<div className=\"loader\"></div>) : <div></div>}\n            </div>\n        )\n    }\n\n    appendShows() {\n        if (!this.appending && this.mounted) {\n            this.appending = true;\n            this.setState({ loading: true })\n            fetch_shows(this.state.page).then(shows => {\n                if (this.mounted) {\n                    this.setState({ loading: false, shows: this.state.shows.concat(shows), page: this.state.page + 1 })\n                    this.appending = false;\n                }\n            })\n        }\n    }\n\n    componentDidMount() {\n        this.mounted = true;\n        window.addEventListener('scroll', () => {\n            if ((document.documentElement.offsetHeight - Math.round(window.innerHeight + document.documentElement.scrollTop)) < 500) {\n                this.appendShows();\n            }\n        });\n        savedState == null ? this.appendShows() : this.setState(savedState);\n        setTimeout(() => document.documentElement.scrollTop = scrollPos, 100);\n    }\n\n    componentWillUnmount() {\n        this.mounted = false;\n        savedState = this.state;\n        scrollPos = document.documentElement.scrollTop;\n    }\n}\n\nclass TVShow extends React.Component {\n    render() {\n        return (\n            <div className=\"TVShow ripple\" onClick={() => setTimeout(() => this.props.history.push(`/show/${this.props.show_link}`), 500)}>\n                <img className=\"shows-img\" src={this.props.show_img} alt={this.props.show_name} title={this.props.show_name} />\n                <div className=\"show-name\">{this.props.show_name}</div>\n            </div>\n        )\n    }\n}\n\nclass TVShowDetails extends React.Component {\n    constructor(props) {\n        super(props)\n        this.state = { loading: true, name: null, description: null, img: null }\n        this.mounted = false;\n    }\n\n    render() {\n        if (this.state.loading)\n            return (<div className=\"loader\"></div>)\n        else {\n            return (\n                <div>\n                    <div className=\"title\">{this.state.name}</div>\n                    <div style={{ margin: \"auto\", textAlign: \"center\" }}> <img className=\"show-details-img\" src={this.state.img} alt={this.state.name} title={this.state.name} /></div>\n                    <div className=\"description\"><p dangerouslySetInnerHTML={{ __html: this.state.description }}></p></div>\n                </div>\n            )\n        }\n    }\n\n    componentDidMount() {\n        this.mounted = true;\n        fetch_show_details(this.props.match.params.show_link).then((details) => {\n            if (this.mounted) {\n                this.setState({ loading: false, name: details.name, description: details.description, img: details.image_thumbnail_path })\n            }\n        })\n    }\n\n    componentWillUnmount() {\n        this.mounted = false;\n    }\n}\n\nReactDOM.render(\n    <App />,\n    document.getElementById('root')\n);\n"],"sourceRoot":""}